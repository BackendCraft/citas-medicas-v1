{% extends "pacientes/base.html" %}

{% block title %}Planes de Suscripción{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="h3">Planes de Suscripción</h1>
    <p class="text-muted">Seleccione el plan que mejor se adapte a sus necesidades</p>
</div>

<div class="row justify-content-center g-4">
    {% for plan in planes %}
    <div class="col-lg-5">
        <div class="card shadow-sm h-100 {% if plan.nombre == 'premium' %}border-primary{% endif %}">
            <div class="card-header bg-white border-bottom p-4 text-center">
                <h5 class="mb-0 {% if plan.nombre == 'premium' %}text-primary{% endif %}">
                    Plan {{ plan.get_nombre_display }}
                </h5>
                {% if plan.nombre == 'premium' %}
                <span class="badge bg-primary my-2"></span>
                {% endif %}
                <div class="mt-3">
                    <span class="display-4 fw-bold">
                        ${{ plan.precio }}
                    </span>
                    <span class="text-muted">/mes</span>
                </div>
            </div>
            <div class="card-body p-4">
                <div class="mb-4">
                    <p>{{ plan.descripcion }}</p>
                </div>
                
                <ul class="list-unstyled mb-4">
                    {% if plan.nombre == 'free' %}
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Gestión básica de citas
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Hasta 10 citas por mes
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Soporte por email
                    </li>
                    <li class="mb-2 text-muted">
                        <i class="bi bi-x-circle me-2"></i>
                        Reportes avanzados
                    </li>
                    <li class="mb-2 text-muted">
                        <i class="bi bi-x-circle me-2"></i>
                        Recordatorios SMS
                    </li>
                    <li class="mb-2 text-muted">
                        <i class="bi bi-x-circle me-2"></i>
                        Historial médico
                    </li>
                    {% else %}
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Gestión completa de citas
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Citas ilimitadas
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Soporte prioritario 24/7
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Reportes avanzados y exportación
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Recordatorios automáticos por SMS
                    </li>
                    <li class="mb-2">
                        <i class="bi bi-check-circle text-success me-2"></i>
                        Gestión de historiales médicos
                    </li>
                    {% endif %}
                </ul>
                
                <div class="text-center">
                    {% if plan.nombre == 'free' %}
                    <a href="{% url 'lista_citas' %}" class="btn btn-outline-secondary btn-lg w-100">
                        <i class="bi bi-check-circle me-2"></i>Usar plan gratuito
                    </a>
                    {% else %}
                    <a href="{% url 'checkout' plan.id %}" class="btn btn-primary btn-lg w-100">
                        <i class="bi bi-credit-card me-2"></i>Suscribirse
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="card mt-5">
    <div class="card-body p-4">
        <h5 class="card-title">Preguntas frecuentes</h5>
        
        <div class="accordion mt-3" id="accordionFAQ">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                        ¿Puedo cambiar de plan en cualquier momento?
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionFAQ">
                    <div class="accordion-body">
                        Sí, puede actualizar o degradar su plan en cualquier momento. Los cambios se aplicarán al inicio del siguiente período de facturación.
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                        ¿Cómo se factura la suscripción?
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionFAQ">
                    <div class="accordion-body">
                        La suscripción se factura mensualmente. Recibirá una notificación por correo electrónico antes de cada renovación.
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                        ¿Puedo cancelar mi suscripción en cualquier momento?
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionFAQ">
                    <div class="accordion-body">
                        Sí, puede cancelar su suscripción en cualquier momento desde su panel de usuario. La suscripción seguirá activa hasta el final del período facturado.
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                        ¿Qué métodos de pago aceptan?
                    </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionFAQ">
                    <div class="accordion-body">
                        Aceptamos todas las tarjetas de crédito y débito principales (Visa, MasterCard, American Express).
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}